<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Exerc√≠cios - EducaF√°cil</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body id="page-body">

<!-- WIDGET DE ACESSIBILIDADE (igual √†s outras telas) -->
<div id="accessibility-widget" class="ac-widget ac-hidden" aria-hidden="true">
    <!-- ... mesmo conte√∫do do widget ... -->
</div>
<button id="accessibility-btn" class="ac-fab" aria-label="Abrir menu de acessibilidade">
    <img src="https://api.iconify.design/material-symbols/accessibility-new.svg?color=%23ffffff"
         alt="√çcone de acessibilidade">
</button>

<div class="dashboard-layout">
    <div class="sidebar">
        <div class="profile-box">
            <img id="aluno-foto" src="https://i.imgur.com/gKjG1o2.png" alt="Foto de perfil do Aluno">
            <p id="aluno-nome" class="aluno-name" style="font-weight: 600;">Aluno</p>
            <p id="aluno-email" class="aluno-email">aluno.ic9@educ.edu.br</p>
        </div>
        <nav class="sidebar-nav">
            <div class="nav-item"><a href="home.html">üè† Home</a></div>
            <div class="nav-item"><a href="forum.html">üí¨ F√≥rum</a></div>
            <div class="nav-item"><a href="aulas.html">‚ñ∂Ô∏è Aulas</a></div>
            <div class="nav-item"><a href="conteudos.html">üìö Conte√∫dos</a></div>
            <div class="nav-item active"><a href="exercicios.html">üìù Exerc√≠cios</a></div>
            <div class="nav-item"><a href="configuracoes.html">‚öôÔ∏è Configura√ß√µes</a></div>
            <div class="nav-item"><a href="certificados.html">üèÖ Certificados</a></div>
        </nav>
        <input type="text" placeholder="Pesquisar" aria-label="Pesquisar na plataforma"
               style="margin: 20px 15px; padding: 8px; border-radius: 10px; border: none;
                      width: calc(100% - 30px); opacity: 0.8;">
    </div>

    <div class="main-content">
        <div class="main-content-area exercicios-main">
            <h1 class="ex-title">Exerc√≠cios de Programa√ß√£o de Computadores e Algoritmos</h1>
            <p class="ex-subtitle">
                Complete os exerc√≠cios na ordem. Primeiro as quest√µes objetivas da Unidade 1, depois o c√≥digo em C.
                A Unidade 2 √© liberada somente ap√≥s concluir a Unidade 1.
            </p>

            <!-- AULA 1 -------------------------------------------------------->
            <div class="card-simple exercicio-card ex-card-a1">
                <h2>Aula 1 ‚Äì Introdu√ß√£o a Algoritmos</h2>
                <p>Status do v√≠deo: <span id="status-video-a1">V√≠deo n√£o verificado</span>
                    (<a href="aulas.html#intro_algoritmos">abrir aula</a>)</p>

                <!-- Exerc√≠cio 1: carrossel de 3 quest√µes -->
                <div class="card-simple inner-card">
                    <div class="ex-header-row">
                        <h3>Exerc√≠cio 1 ‚Äì Quest√µes objetivas</h3>
                        <span id="ex1-a1-progresso" class="ex-steps-indicator">Quest√£o 1 de 3</span>
                    </div>
                    <p>Responda quest√£o por quest√£o. Ao acertar as tr√™s, o exerc√≠cio pr√°tico ser√° liberado.</p>

                    <div class="ex-carousel" aria-live="polite">
                        <!-- Slide 1 -->
                        <div class="ex-slide active" data-index="0">
                            <p><strong>1)</strong> O que melhor descreve um algoritmo em programa√ß√£o de computadores?</p>
                            <form class="quiz-slide-form" data-q="1">
                                <label><input type="radio" name="q1" value="a">
                                    a) Um programa j√° compilado e execut√°vel.</label>
                                <label><input type="radio" name="q1" value="b">
                                    b) Uma sequ√™ncia finita de passos bem definidos para resolver um problema.</label>
                                <label><input type="radio" name="q1" value="c">
                                    c) Um conjunto aleat√≥rio de instru√ß√µes sem ordem.</label>
                                <label><input type="radio" name="q1" value="d">
                                    d) Apenas o c√≥digo em linguagem de alto n√≠vel.</label>
                            </form>
                            <p class="quiz-feedback" id="fb-q1"></p>
                            <div class="ex-nav-row">
                                <button type="button" class="quiz-btn" onclick="verificarQuestao(1,'b')">
                                    Verificar e ir para pr√≥xima
                                </button>
                            </div>
                        </div>

                        <!-- Slide 2 -->
                        <div class="ex-slide" data-index="1">
                            <p><strong>2)</strong> Qual alternativa representa um exemplo de entrada, processamento e sa√≠da?</p>
                            <form class="quiz-slide-form" data-q="2">
                                <label><input type="radio" name="q2" value="a">
                                    a) Somar dois n√∫meros e mostrar o resultado.</label>
                                <label><input type="radio" name="q2" value="b">
                                    b) Guardar um n√∫mero em uma vari√°vel.</label>
                                <label><input type="radio" name="q2" value="c">
                                    c) Imprimir uma mensagem fixa na tela.</label>
                                <label><input type="radio" name="q2" value="d">
                                    d) Ler um n√∫mero, mas n√£o fazer nada com ele.</label>
                            </form>
                            <p class="quiz-feedback" id="fb-q2"></p>
                            <div class="ex-nav-row">
                                <button type="button" class="quiz-secondary-btn" onclick="voltarSlide()">
                                    Voltar
                                </button>
                                <button type="button" class="quiz-btn" onclick="verificarQuestao(2,'a')">
                                    Verificar e ir para pr√≥xima
                                </button>
                            </div>
                        </div>

                        <!-- Slide 3 -->
                        <div class="ex-slide" data-index="2">
                            <p><strong>3)</strong> Em um fluxograma simples, o losango √© usado para:</p>
                            <form class="quiz-slide-form" data-q="3">
                                <label><input type="radio" name="q3" value="a">
                                    a) Indicar o in√≠cio e fim do algoritmo.</label>
                                <label><input type="radio" name="q3" value="b">
                                    b) Representar uma opera√ß√£o de processamento.</label>
                                <label><input type="radio" name="q3" value="c">
                                    c) Representar uma decis√£o (condi√ß√£o).</label>
                                <label><input type="radio" name="q3" value="d">
                                    d) Mostrar dados de sa√≠da.</label>
                            </form>
                            <p class="quiz-feedback" id="fb-q3"></p>
                            <div class="ex-nav-row">
                                <button type="button" class="quiz-secondary-btn" onclick="voltarSlide()">
                                    Voltar
                                </button>
                                <button type="button" class="quiz-btn" onclick="finalizarQuizA1()">
                                    Verificar e finalizar
                                </button>
                            </div>
                        </div>
                    </div>

                    <p id="quiz-a1-feedback" class="quiz-feedback" aria-live="polite"></p>
                </div>

                <!-- Exerc√≠cio 2 pr√°tico + COMPILADOR -->
                <div id="ex2-a1-bloco" class="card-simple inner-card ex-bloqueado">
                    <h3>Exerc√≠cio 2 ‚Äì C√≥digo em C</h3>
                    <p id="ex2-a1-status"><strong>Bloqueado.</strong> Complete corretamente todas as quest√µes do Exerc√≠cio 1.</p>
                    <div id="ex2-a1-conteudo" style="display:none;">
                        <p>Use o compilador abaixo para testar seu c√≥digo em C ou, se preferir, baixe o enunciado e envie o arquivo de>.c</code>.</p>

        <!-- COMPILADOR ONLINE (iframe) -->
                        <iframe
                            id="compiler-a1"
                            src="https://onecompiler.com/embed/c?theme=dark"
                            frameborder="0"
                            width="100%"
                            height="380"
                            style="border-radius: 10px; margin: 8px 0;"
                            title="Compilador C online - Aula 1"
                            allow="fullscreen">
                        </iframe>

                        <p>Baixe o enunciado, escreva o programa em C em seu computador e depois envie o arquivo de>.c</code> pelo formul√°rio abaixo.</p>

                        <a class="home-link-btn" href="pdfs/aula1_pratico.pdf" target="_blank">
                            Baixar enunciado em PDF
                        </a>

                        <div class="codigo-upload">
                            <label for="codigo-a1">Enviar arquivo de c√≥digo em C (.c)</label>
                            <input id="codigo-a1" type="file" accept=".c">
                            <button type="button" class="quiz-btn" onclick="enviarCodigo('a1')">
                                Enviar c√≥digo
                            </button>
                            <p id="codigo-a1-feedback" class="quiz-feedback" aria-live="polite"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AULA 2 -------------------------------------------------------->
            <div class="card-simple exercicio-card ex-card-a2">
                <h2>Aula 2 ‚Äì Vari√°veis e Operadores</h2>
                <p>Status do v√≠deo: <span id="status-video-a2">V√≠deo n√£o verificado</span>
                    (<a href="aulas.html#variaveis_operadores">abrir aula</a>)</p>

                <div id="mod2-bloqueio" class="card-simple inner-card">
                    <p><strong>Bloqueado.</strong> Conclua os exerc√≠cios da Aula 1 para liberar este m√≥dulo.</p>
                </div>

                <div id="mod2-conteudo" style="display:none;">

                    <div class="card-simple inner-card">
                        <h3>Exerc√≠cio 1 ‚Äì Quest√µes objetivas</h3>
                        <p>Perguntas sobre declara√ß√£o de vari√°veis e uso de operadores.</p>

                        <form id="quiz-a2-form" class="quiz-form">
                            <div class="quiz-question">
                                <p><strong>1)</strong> Qual declara√ß√£o √© v√°lida para uma vari√°vel inteira
                                    chamada de>idade</code> em C?</p>
                                <label><input type="radio" name="q1" value="a">a) inteiro idade;</label>
                                <label><input type="radio" name="q1" value="b">b) int idade;</label>
                                <label><input type="radio" name="q1" value="c">c) idade int;</label>
                                <label><input type="radio" name="q1" value="d">d) var idade = inteiro;</label>
                            </div>

                            <div class="quiz-question">
                                <p><strong>2)</strong> Qual operador √© usado para resto de divis√£o inteira em C?</p>
                                <label><input type="radio" name="q2" value="a">a) /</label>
                                <label><input type="radio" name="q2" value="b">b) *</label>
                                <label><input type="radio" name="q2" value="c">c) %</label>
                                <label><input type="radio" name="q2" value="d">d) ==</label>
                            </div>

                            <div class="quiz-question">
                                <p><strong>3)</strong> Em C, qual express√£o avalia se duas vari√°veis
                                   de>a</code> e de>b</code> s√£o iguais?</p>
                                <label><input type="radio" name="q3" value="a">a) a = b</label>
                                <label><input type="radio" name="q3" value="b">b) a == b</label>
                                <label><input type="radio" name="q3" value="c">c) a != b</label>
                                <label><input type="radio" name="q3" value="d">d) a <> b</label>
                            </div>

                            <button type="button" class="quiz-btn" onclick="corrigirQuizA2()">
                                Verificar respostas
                            </button>
                        </form>
                        <p id="quiz-a2-feedback" class="quiz-feedback" aria-live="polite"></p>
                    </div>

                    <div id="ex2-a2-bloco" class="card-simple inner-card ex-bloqueado">
                        <h3>Exerc√≠cio 2 ‚Äì C√≥digo em C</h3>
                        <p id="ex2-a2-status"><strong>Bloqueado.</strong> Acerte todas as quest√µes do Exerc√≠cio 1 para desbloquear.</p>
                        <div id="ex2-a2-conteudo" style="display:none;">
                            <p>Baixe o enunciado, escreva o programa em C e envie o arquivo
                               de>.c</code> para registrar sua pr√°tica.</p>

                            <a class="home-link-btn" href="pdfs/aula2_pratico.pdf" target="_blank">
                                Baixar enunciado em PDF
                            </a>

                            <div class="codigo-upload">
                                <label for="codigo-a2">Enviar arquivo de c√≥digo em C (.c)</label>
                                <input id="codigo-a2" type="file" accept=".c">
                                <button type="button" class="quiz-btn" onclick="enviarCodigo('a2')">
                                    Enviar c√≥digo
                                </button>
                                <p id="codigo-a2-feedback" class="quiz-feedback" aria-live="polite"></p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>

<div id="talkback-container" class="hidden">
    <div class="bot-icon">üîä</div>
    <p id="talkback-message">Talkback ativado.</p>
</div>

<script src="script.js"></script>

<script>
// Estilo: cards em coluna, cores past√©is, t√≠tulo mais embaixo
const exStyle = document.createElement('style');
exStyle.textContent = `
.exercicios-main {
    max-width: 820px;
    margin: 0 auto;
    padding: 28px 16px 16px; /* t√≠tulo um pouco mais para baixo */
}
.ex-title {
    margin-top: 16px;
    margin-bottom: 4px;
    text-align: center;
}
.ex-subtitle {
    text-align: center;
    font-size: 13px;
    opacity: .85;
    margin-bottom: 18px;
}
.exercicio-card {
    margin-bottom: 18px;
    border-radius: 18px;
    padding: 14px 16px;
}
.ex-card-a1 { background: #fdf4ff; }
.ex-card-a2 { background: #ecfeff; }
.inner-card {
    margin-top: 10px;
    border-radius: 14px;
    background: #ffffffc4;
}
.ex-header-row {
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
}
.ex-steps-indicator {
    font-size:12px;
    opacity:.8;
}
.ex-carousel {
    margin-top: 10px;
    position: relative;
    min-height: 140px;
}
.ex-slide { display:none; }
.ex-slide.active { display:block; }
.quiz-slide-form label,
.quiz-question label {
    display:block;
    margin-left:8px;
    margin-bottom:2px;
    font-size:13px;
}
.quiz-btn {
    margin-top: 8px;
    border:none;
    border-radius:999px;
    padding:8px 14px;
    background:#2563eb;
    color:#fff;
    font-size:14px;
    cursor:pointer;
}
.quiz-secondary-btn {
    margin-top: 8px;
    border:none;
    border-radius:999px;
    padding:8px 12px;
    background:#e0ebff;
    color:#111827;
    font-size:13px;
    cursor:pointer;
}
.quiz-btn:hover,
.quiz-secondary-btn:hover { opacity:.96; }
.quiz-feedback { margin-top:6px; font-size:13px; }
.ex-nav-row {
    margin-top:4px;
    display:flex;
    gap:8px;
}
.codigo-upload { margin-top:10px; font-size:13px; }
.codigo-upload input[type="file"] { display:block; margin-top:4px; margin-bottom:4px; }
.ex-bloqueado { opacity:0.7; }
`;
document.head.appendChild(exStyle);

// Estado inicial: bloqueios e status
document.addEventListener('DOMContentLoaded', () => {
    const v1 = localStorage.getItem('video_a1_assistido') === 'true';
    const v2 = localStorage.getItem('video_a2_assistido') === 'true';
    document.getElementById('status-video-a1').textContent = v1 ? 'V√≠deo marcado como assistido' : 'V√≠deo n√£o verificado';
    document.getElementById('status-video-a2').textContent = v2 ? 'V√≠deo marcado como assistido' : 'V√≠deo n√£o verificado';

    const aula1Ok = localStorage.getItem('pca_mod1_exercicios_ok') === 'true';
    if (aula1Ok) {
        desbloquearPratico('a1');
        desbloquearModulo2();
    } else {
        document.getElementById('mod2-bloqueio').style.display = 'block';
        document.getElementById('mod2-conteudo').style.display = 'none';
    }

    const aula2Ok = localStorage.getItem('pca_mod2_exercicios_ok') === 'true';
    if (aula2Ok) {
        desbloquearPratico('a2');
    }

    atualizarIndicadorEx1(0);
});

// ----- carrossel Aula 1 -----
let slideAtual = 0;
const totalSlides = 3;
const respostasCorretas = {1:false,2:false,3:false};

function mostrarSlide(idx) {
    const slides = document.querySelectorAll('.ex-slide');
    slides.forEach(s => s.classList.remove('active'));
    const alvo = slides[idx];
    if (alvo) alvo.classList.add('active');
    slideAtual = idx;
    atualizarIndicadorEx1(idx);
}

function atualizarIndicadorEx1(idx){
    const span = document.getElementById('ex1-a1-progresso');
    if (span) span.textContent = `Quest√£o ${idx+1} de ${totalSlides}`;
}

function voltarSlide(){
    if (slideAtual > 0) mostrarSlide(slideAtual - 1);
}

function verificarQuestao(num, correta) {
    const form = document.querySelector(`.quiz-slide-form[data-q="${num}"]`);
    const fb   = document.getElementById(`fb-q${num}`);
    if (!form || !fb) return;

    const selecionada = form.querySelector('input[type="radio"]:checked');
    if (!selecionada) {
        fb.textContent = 'Selecione uma alternativa antes de continuar.';
        fb.style.color = '#c62828';
        return;
    }

    if (selecionada.value === correta) {
        respostasCorretas[num] = true;
        fb.textContent = 'Correto! Pode avan√ßar para a pr√≥xima quest√£o.';
        fb.style.color = '#2e7d32';
        if (slideAtual < totalSlides - 1) {
            setTimeout(() => mostrarSlide(slideAtual + 1), 350);
        }
    } else {
        respostasCorretas[num] = false;
        let motivo = '';
        if (num === 1) {
            motivo = 'Um algoritmo √© uma sequ√™ncia de passos para resolver um problema, n√£o um programa pronto.';
        } else if (num === 2) {
            motivo = 'Entrada, processamento e sa√≠da aparecem quando somamos dois n√∫meros e mostramos o resultado.';
        }
        fb.textContent = 'Resposta incorreta. ' + motivo;
        fb.style.color = '#c62828';
    }
}

function finalizarQuizA1() {
    verificarQuestao(3,'c');
    if (respostasCorretas[1] && respostasCorretas[2] && respostasCorretas[3]) {
        const fbGeral = document.getElementById('quiz-a1-feedback');
        if (fbGeral) {
            fbGeral.textContent = 'Muito bem! Voc√™ concluiu todas as quest√µes. O exerc√≠cio pr√°tico foi liberado.';
            fbGeral.style.color = '#2e7d32';
        }
        localStorage.setItem('pca_mod1_exercicios_ok', 'true');
        localStorage.setItem('pca_mod1_concluido', 'true');
        localStorage.setItem('pca_mod1_progresso', '100');
        desbloquearPratico('a1');
        desbloquearModulo2();
    }
}

// --------- QUIZ AULA 2 ----------
function corrigirQuizA2() {
    if (localStorage.getItem('pca_mod1_exercicios_ok') !== 'true') {
        alert('Conclua primeiro os exerc√≠cios da Aula 1.');
        return;
    }

    const form = document.getElementById('quiz-a2-form');
    const fb   = document.getElementById('quiz-a2-feedback');
    if (!form || !fb) return;

    const q1 = form.q1.value;
    const q2 = form.q2.value;
    const q3 = form.q3.value;

    let erros = [];
    if (q1 !== 'b') erros.push('Quest√£o 1: em C, a declara√ß√£o correta √© "int idade;".');
    if (q2 !== 'c') erros.push('Quest√£o 2: o operador de resto de divis√£o inteira √© o s√≠mbolo %.');
    if (q3 !== 'b') erros.push('Quest√£o 3: para comparar igualdade em C usamos "==", n√£o "=".');

    if (!q1 || !q2 || !q3) {
        fb.textContent = 'Responda todas as quest√µes antes de verificar.';
        fb.style.color = '#c62828';
        return;
    }

    if (erros.length === 0) {
        fb.textContent = '√ìtimo! Voc√™ acertou todas. O exerc√≠cio pr√°tico da Aula 2 foi liberado.';
        fb.style.color = '#2e7d32';
        localStorage.setItem('pca_mod2_exercicios_ok', 'true');
        localStorage.setItem('pca_mod2_concluido', 'true');
        localStorage.setItem('pca_mod2_progresso', '100');
        desbloquearPratico('a2');
    } else {
        fb.textContent = 'Algumas respostas est√£o incorretas:\n- ' + erros.join('\n- ');
        fb.style.whiteSpace = 'pre-line';
        fb.style.color = '#c62828';
    }
}

// --------- DESBLOQUEIOS ----------
function desbloquearPratico(aulaId) {
    const blocoId    = aulaId === 'a1' ? 'ex2-a1-bloco'    : 'ex2-a2-bloco';
    const statusId   = aulaId === 'a1' ? 'ex2-a1-status'   : 'ex2-a2-status';
    const conteudoId = aulaId === 'a1' ? 'ex2-a1-conteudo' : 'ex2-a2-conteudo';

    const bloco    = document.getElementById(blocoId);
    const statusEl = document.getElementById(statusId);
    const conteudo = document.getElementById(conteudoId);
    if (!bloco || !statusEl || !conteudo) return;

    bloco.classList.remove('ex-bloqueado');
    statusEl.textContent = 'Liberado. Use os materiais e envie seu arquivo de c√≥digo C abaixo.';
    conteudo.style.display = 'block';
}

function desbloquearModulo2() {
    const b = document.getElementById('mod2-bloqueio');
    const c = document.getElementById('mod2-conteudo');
    if (b) b.style.display = 'none';
    if (c) c.style.display = 'block';
    localStorage.setItem('pca_mod2_liberado', 'true');
}

// --------- ENVIO DE C√ìDIGO (simulado) ----------
function enviarCodigo(aulaId) {
    const inputId   = aulaId === 'a1' ? 'codigo-a1' : 'codigo-a2';
    const fbId      = aulaId === 'a1' ? 'codigo-a1-feedback' : 'codigo-a2-feedback';

    const input = document.getElementById(inputId);
    const fb    = document.getElementById(fbId);
    if (!input || !fb) return;

    if (!input.files || input.files.length === 0) {
        fb.textContent = 'Selecione um arquivo .c antes de enviar.';
        fb.style.color = '#c62828';
        return;
    }

    const file = input.files[0];
    if (!file.name.toLowerCase().endsWith('.c')) {
        fb.textContent = 'Envie apenas arquivos com extens√£o .c.';
        fb.style.color = '#c62828';
        return;
    }

    fb.textContent = 'C√≥digo recebido! Este envio √© uma simula√ß√£o; mostre o arquivo ao professor para corre√ß√£o.';
    fb.style.color = '#2e7d32';
}
</script>
</body>
</html>
