<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificados - EducaF√°cil</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body id="page-body">

<!-- WIDGET DE ACESSIBILIDADE -->
<div id="accessibility-widget" class="ac-widget ac-hidden" aria-hidden="true">
    <div class="ac-header">
        <div class="ac-header-top">
            <span class="ac-title">Menu Acessibilidade (CTRL+U)</span>
            <button id="ac-close-btn" class="ac-icon-btn" aria-label="Fechar menu de acessibilidade">√ó</button>
        </div>

        <div class="ac-select-row">
            <button class="ac-pill" id="ac-lang-btn">Portugu√™s (Brasil)</button>
            <button class="ac-pill ac-pill-active" id="ac-profile-btn">Dislexia perfil ativo</button>
        </div>

        <div class="ac-select-row">
            <button class="ac-pill ac-pill-xl ac-pill-active" id="ac-widget-size-btn">
                XL Widget superdimensionado
            </button>
        </div>
    </div>

    <div class="ac-profiles-section">
        <div class="ac-profiles-header">
            <span>Perfis de acessibilidade</span>
        </div>
        <div class="ac-profiles-grid">
            <button class="ac-profile" data-profile="deficiencia-motora">Defici√™ncia Motora</button>
            <button class="ac-profile" data-profile="cego">Cego</button>
            <button class="ac-profile" data-profile="daltonico">Dalt√¥nico</button>
            <button class="ac-profile" data-profile="dislexia">Dislexia</button>
            <button class="ac-profile" data-profile="baixa-visao">Baixa vis√£o</button>
            <button class="ac-profile" data-profile="cognitivo">Cognitivo e Aprendizagem</button>
            <button class="ac-profile" data-profile="convulsao">Convuls√£o e epilepsia</button>
            <button class="ac-profile" data-profile="tdah">TDAH</button>
        </div>
    </div>

    <div class="ac-grid">
        <button id="ac-ler-pagina" class="ac-item"><span class="ac-item-title">Ler a p√°gina</span></button>
        <button id="ac-contraste-mais" class="ac-item"><span class="ac-item-title">Contraste +</span></button>
        <button id="ac-contraste-inteligente" class="ac-item"><span class="ac-item-title">Contraste inteligente</span></button>
        <button id="ac-links-destacados" class="ac-item"><span class="ac-item-title">Links destacados</span></button>
        <button id="ac-texto-maior" class="ac-item"><span class="ac-item-title">Texto maior</span></button>
        <button id="ac-espacamento-texto" class="ac-item"><span class="ac-item-title">Espa√ßamento de texto</span></button>
        <button id="ac-animacoes" class="ac-item"><span class="ac-item-title">Reproduzir anima√ß√µes</span></button>
        <button id="ac-ocultar-imagens" class="ac-item"><span class="ac-item-title">Ocultar imagens</span></button>
        <button id="ac-dislexia" class="ac-item"><span class="ac-item-title">Df Dislexia amig√°vel</span></button>
        <button id="ac-cursor" class="ac-item"><span class="ac-item-title">Cursor</span></button>
        <button id="ac-barra-ferramentas" class="ac-item"><span class="ac-item-title">Barra de ferramentas</span></button>
        <button id="ac-estrutura-pagina" class="ac-item"><span class="ac-item-title">Estrutura da p√°gina</span></button>
        <button id="ac-altura-linha" class="ac-item"><span class="ac-item-title">Altura da linha</span></button>
        <button id="ac-alinhamento-texto" class="ac-item"><span class="ac-item-title">Alinhamento de texto</span></button>
        <button id="ac-saturacao" class="ac-item"><span class="ac-item-title">Satura√ß√£o</span></button>
    </div>

    <div class="ac-footer">
        <button id="ac-reset" class="ac-reset-btn">
            Redefinir todas as configura√ß√µes de acessibilidade
        </button>
        <button id="ac-toggle-visibility" class="ac-move-btn">
            Mover/ocultar widget
        </button>
    </div>
</div>

<!-- BOT√ÉO FLUTUANTE -->
<button id="accessibility-btn" class="ac-fab" aria-label="Abrir menu de acessibilidade">
    <img src="https://api.iconify.design/material-symbols/accessibility-new.svg?color=%23ffffff"
         alt="√çcone de acessibilidade">
</button>

<div class="dashboard-layout">
    <div class="sidebar">
        <div class="profile-box">
            <img id="aluno-foto" src="https://i.imgur.com/gKjG1o2.png" alt="Foto de perfil do Aluno">
            <p id="aluno-nome" class="aluno-name" style="font-weight: 600;">Aluno</p>
            <p id="aluno-email" class="aluno-email">aluno.ic9@educ.edu.br</p>
        </div>
        <nav class="sidebar-nav">
            <div class="nav-item"><a href="home.html"><i class="icon">üè†</i>Home</a></div>
            <div class="nav-item"><a href="forum.html"><i class="icon">üí¨</i>F√≥rum</a></div>
            <div class="nav-item"><a href="aulas.html"><i class="icon">‚ñ∂Ô∏è</i>Aulas</a></div>
            <div class="nav-item"><a href="conteudos.html"><i class="icon">üìö</i>Conte√∫dos</a></div>
            <div class="nav-item"><a href="exercicios.html"><i class="icon">üìù</i>Exerc√≠cios</a></div>
            <div class="nav-item"><a href="configuracoes.html"><i class="icon">‚öôÔ∏è</i>Configura√ß√µes</a></div>
            <div class="nav-item active"><a href="certificados.html"><i class="icon">üèÖ</i>Certificados</a></div>
        </nav>
        <input type="text" placeholder="Pesquisar" aria-label="Pesquisar na plataforma"
               style="margin: 20px 15px; padding: 8px; border-radius: 10px; border: none;
                      width: calc(100% - 30px); opacity: 0.8;">
    </div>

    <div class="main-content">
        <div class="main-content-area">
            <h1 style="margin: 18px 0 10px;">Meus Certificados</h1>
            <p style="margin-bottom: 24px;">
                Acompanhe aqui seus certificados da disciplina de Programa√ß√£o de Computadores e Algoritmos (PCA).
                O certificado final √© liberado automaticamente quando todas as unidades e exerc√≠cios forem conclu√≠dos.
            </p>

            <!-- Resumo de progresso PCA -->
            <div class="card-simple" style="margin-bottom: 20px;">
                <h2 style="font-size:1.3rem; margin-bottom:6px;">Resumo de conclus√£o de PCA</h2>
                <p>
                    M√≥dulos conclu√≠dos: <strong id="pca-modulos-ok">0</strong> de <strong>6</strong> ¬∑
                    Exerc√≠cios pr√°ticos entregues: <strong id="pca-praticos-ok">0</strong> de <strong>2</strong>.
                </p>
                <div class="progress-bar-container" style="margin-top:8px;">
                    <div id="pca-progress-bar" class="progress-bar primary" style="width: 0%;"></div>
                </div>
            </div>

            <!-- Certificado PCA -->
            <div class="card-simple" style="padding: 24px; margin-bottom: 20px;">
                <h2 style="font-size: 1.4rem; margin-bottom: 5px;">
                    Certificado: Programa√ß√£o de Computadores e Algoritmos (PCA)
                </h2>
                <p id="cert-pca-status" style="margin-bottom: 8px;">
                    Situa√ß√£o: Em andamento. Conclua todas as aulas e exerc√≠cios para liberar o certificado.
                </p>
                <p style="font-size: 14px; margin-bottom: 16px;">
                    Carga hor√°ria prevista: 40h ¬∑ Conte√∫dos inclu√≠dos:
                    introdu√ß√£o a algoritmos, vari√°veis e operadores, estruturas de decis√£o e repeti√ß√£o,
                    vetores/matrizes e resolu√ß√£o de problemas com projetos pr√°ticos.
                </p>
                <button id="cert-pca-btn" class="form-btn"
                        style="width: 100%; padding: 12px 0;"
                        type="button"
                        disabled
                        aria-disabled="true"
                        aria-label="Certificado de Programa√ß√£o de Computadores e Algoritmos ainda n√£o liberado">
                    Certificado ainda n√£o dispon√≠vel
                </button>
            </div>

            <!-- Orienta√ß√µes -->
            <div class="card-simple" style="padding: 20px;">
                <h2 style="font-size: 1.2rem; margin-bottom: 6px;">Como completar o curso PCA</h2>
                <ul style="font-size: 14px; margin-top:4px;">
                    <li>Assista √†s 6 aulas na p√°gina ‚ÄúAulas‚Äù.</li>
                    <li>Acerta todas as quest√µes dos Exerc√≠cios 1 das Aulas 1 e 2.</li>
                    <li>Envie pelo menos 2 c√≥digos pr√°ticos (.c) nos Exerc√≠cios 2 das Aulas 1 e 2.</li>
                    <li>Ao cumprir todos os requisitos, esta tela ser√° atualizada automaticamente e o bot√£o de download do certificado ser√° ativado.</li>
                </ul>
            </div>

        </div>
    </div>
</div>

<div id="talkback-container" class="hidden">
    <div class="bot-icon">üîä</div>
    <p id="talkback-message">Talkback ativado.</p>
</div>

<script src="script.js"></script>
<script>
// L√≥gica de certificados PCA
document.addEventListener('DOMContentLoaded', () => {
    // Leitura das flags de conclus√£o que voc√™ j√° usa nas outras telas
    const modConcluido = {
        1: localStorage.getItem('pca_mod1_concluido') === 'true',
        2: localStorage.getItem('pca_mod2_concluido') === 'true',
        3: localStorage.getItem('pca_mod3_concluido') === 'true',
        4: localStorage.getItem('pca_mod4_concluido') === 'true',
        5: localStorage.getItem('pca_mod5_concluido') === 'true',
        6: localStorage.getItem('pca_mod6_concluido') === 'true'
    };

    // Exerc√≠cios pr√°ticos: marque essas flags quando receber o .c nas telas de exerc√≠cios
    const praticoA1 = localStorage.getItem('pca_pratico_a1_ok') === 'true';
    const praticoA2 = localStorage.getItem('pca_pratico_a2_ok') === 'true';

    const totalModulos = 6;
    const concluidos = Object.values(modConcluido).filter(v => v).length;
    const praticosOk = [praticoA1, praticoA2].filter(v => v).length;

    // Atualiza resumo
    const modulosEl = document.getElementById('pca-modulos-ok');
    const praticosEl = document.getElementById('pca-praticos-ok');
    const barraEl = document.getElementById('pca-progress-bar');

    if (modulosEl)  modulosEl.textContent  = concluidos.toString();
    if (praticosEl) praticosEl.textContent = praticosOk.toString();

    const progressoPercent = Math.round(((concluidos / totalModulos) * 0.8 + (praticosOk / 2) * 0.2) * 100);
    if (barraEl) barraEl.style.width = Math.min(100, progressoPercent) + '%';

    const statusEl = document.getElementById('cert-pca-status');
    const btn = document.getElementById('cert-pca-btn');

    const todosModulos = concluidos === totalModulos;
    const todosPraticos = praticosOk === 2;

    if (todosModulos && todosPraticos) {
        // Marca curso como conclu√≠do
        localStorage.setItem('pca_concluido', 'true');

        if (statusEl) {
            statusEl.textContent = 'Situa√ß√£o: Conclu√≠do. Seu certificado est√° dispon√≠vel para download.';
        }
        if (btn) {
            btn.textContent = 'Baixar Certificado PCA (PDF)';
            btn.disabled = false;
            btn.removeAttribute('aria-disabled');
            btn.setAttribute('aria-label','Baixar certificado de Programa√ß√£o de Computadores e Algoritmos em PDF');
            btn.onclick = () => {
                window.open('certificados/pca_concluido.pdf','_blank');
            };
        }
    } else {
        if (statusEl) {
            statusEl.textContent = 'Situa√ß√£o: Em andamento. Conclua os 6 m√≥dulos e envie os 2 exerc√≠cios pr√°ticos para liberar o certificado.';
        }
        if (btn) {
            btn.disabled = true;
            btn.setAttribute('aria-disabled','true');
            btn.textContent = 'Certificado ainda n√£o dispon√≠vel';
        }
    }
});
</script>
</body>
</html>
