<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - EducaF치cil</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body id="page-body">

<!-- WIDGET DE ACESSIBILIDADE -->
<div id="accessibility-widget" class="ac-widget ac-hidden" aria-hidden="true">
    <!-- aqui vai o mesmo conte칰do do widget usado nas outras telas -->
</div>
<button id="accessibility-btn" class="ac-fab" aria-label="Abrir menu de acessibilidade">
    <img src="https://api.iconify.design/material-symbols/accessibility-new.svg?color=%23ffffff"
         alt="칈cone de acessibilidade">
</button>

<div class="dashboard-layout">
    <div class="sidebar">
        <div class="profile-box">
            <img id="aluno-foto" src="https://i.imgur.com/gKjG1o2.png" alt="Foto de perfil do Aluno">
            <p id="aluno-nome" class="aluno-name" style="font-weight: 600;">Aluno</p>
            <p id="aluno-email" class="aluno-email">aluno.ic9@educ.edu.br</p>
        </div>

        <nav class="sidebar-nav">
            <div class="nav-item active"><a href="home.html"><i class="icon">游</i>Home</a></div>
            <div class="nav-item"><a href="forum.html"><i class="icon">游눫</i>F칩rum</a></div>
            <div class="nav-item"><a href="aulas.html"><i class="icon">郊윒잺</i>Aulas</a></div>
            <div class="nav-item"><a href="conteudos.html"><i class="icon">游닄</i>Conte칰dos</a></div>
            <div class="nav-item"><a href="exercicios.html"><i class="icon">游닇</i>Exerc칤cios</a></div>
            <div class="nav-item"><a href="configuracoes.html"><i class="icon">丘뙖잺</i>Configura칞칫es</a></div>
            <div class="nav-item"><a href="certificados.html"><i class="icon">游끤</i>Certificados</a></div>
        </nav>

        <input type="text" placeholder="Pesquisar" aria-label="Pesquisar na plataforma"
               style="margin: 20px 15px; padding: 8px; border-radius: 10px; border: none;
                      width: calc(100% - 30px); opacity: 0.8;">
    </div>

    <div class="main-content">
        <div class="main-content-area home-main">
            <h1>Programa칞칚o de Computadores e Algoritmos</h1>
            <p class="home-subtitle">Acompanhe seu progresso e veja o que estudar em seguida.</p>

            <div class="home-grid home-grid-elegant">

                <!-- Card 1: Progresso em PCA -->
                <div class="card-simple progress-card home-card-a1" tabindex="0"
                     aria-label="Seu progresso em Programa칞칚o de Computadores e Algoritmos">
                    <h3>Progresso em PCA</h3>

                    <div class="progress-item">
                        <p>1. Fundamentos de Programa칞칚o</p>
                        <div class="progress-bar-container">
                            <div id="prog-mod1" class="progress-bar success" style="width: 0%;"></div>
                        </div>
                        <span id="prog-mod1-text" class="progress-percent">0%</span>
                    </div>

                    <div class="progress-item">
                        <p>2. Constru칞칚o de Algoritmos</p>
                        <div class="progress-bar-container">
                            <div id="prog-mod2" class="progress-bar success" style="width: 0%;"></div>
                        </div>
                        <span id="prog-mod2-text" class="progress-percent">0%</span>
                    </div>

                    <div class="progress-item">
                        <p>3. Estruturas de Dados B치sicas</p>
                        <div class="progress-bar-container">
                            <div id="prog-mod3" class="progress-bar success" style="width: 0%;"></div>
                        </div>
                        <span id="prog-mod3-text" class="progress-percent">0%</span>
                    </div>

                    <hr style="margin: 10px 0; border:none; border-top:1px solid #eceff7;">

                    <p class="progress-total">
                        Progresso geral no curso:
                        <strong><span id="prog-total-text">0%</span></strong>
                    </p>
                    <div class="progress-bar-container">
                        <div id="prog-total" class="progress-bar primary" style="width: 0%;"></div>
                    </div>
                </div>

                <!-- Card 2: Conte칰dos em estudo -->
                <div class="card-simple theories-card home-card-a2" tabindex="0"
                     aria-label="T칩picos em estudo em programa칞칚o de computadores e algoritmos">
                    <h3>Conte칰dos em estudo</h3>
                    <ul class="home-list">
                        <li>Tipos de dados, vari치veis e operadores.</li>
                        <li>Estruturas de decis칚o e repeti칞칚o.</li>
                        <li>Pseudoc칩digo, fluxogramas e testes de mesa.</li>
                    </ul>
                    <button class="home-link-btn" onclick="window.location.href='conteudos.html'">
                        Ver materiais detalhados
                    </button>
                </div>

                <!-- Card 3: M칩dulo em destaque -->
                <div class="card-simple highlight-card home-card-a3" tabindex="0"
                     aria-label="M칩dulo em destaque de Programa칞칚o de Computadores e Algoritmos">
                    <h2>M칩dulo em destaque</h2>
                    <p id="mod-destaque-text">Fundamentos de Programa칞칚o</p>
                    <div class="progress-bar-container" style="margin-top: 10px;">
                        <div id="prog-destaque" class="progress-bar primary" style="width: 0%;"></div>
                    </div>
                    <button class="home-link-btn" style="margin-top: 10px;"
                            onclick="window.location.href='aulas.html'">
                        Ir para as aulas
                    </button>
                </div>

                <!-- Card 4: Pr칩ximos passos -->
                <div class="card-simple home-card-a4" tabindex="0"
                     aria-label="Pr칩ximos passos em programa칞칚o de computadores e algoritmos">
                    <h3>Pr칩ximos passos</h3>
                    <ul class="home-list">
                        <li>Concluir o m칩dulo atual (aulas e exerc칤cios).</li>
                        <li>Rever exerc칤cios com maior dificuldade.</li>
                        <li>Aplicar os algoritmos em pequenos projetos pessoais.</li>
                    </ul>
                    <button class="home-link-btn"
                            onclick="window.location.href='exercicios.html'">
                        Ir para exerc칤cios
                    </button>
                </div>

            </div>
        </div>
    </div>
</div>

<script src="script.js"></script>
<script>
// Estilo extra: cards com cores pastel e grid
const homeStyle = document.createElement('style');
homeStyle.textContent = `
body {
    background:#f4f6fb;
}
.home-main h1 { margin-bottom: 4px; }
.home-subtitle { font-size: 13px; opacity: .8; margin-bottom: 16px; }
.home-grid-elegant {
    display: grid;
    grid-template-columns: 2fr 1.3fr;
    grid-template-rows: auto auto;
    gap: 18px;
}

/* cores pastel dos cards */
.home-card-a1 { background:#fdf4ff; }
.home-card-a2 { background:#ecfeff; }
.home-card-a3 { background:#fefce8; }
.home-card-a4 { background:#e0f2fe; }

.home-list { padding-left: 18px; font-size: 14px; }
.home-list li { margin-bottom: 4px; }
.progress-item { margin-bottom: 10px; position: relative; padding-right: 40px; }
.progress-percent {
    position: absolute;
    right: 0;
    top: 0;
    font-size: 12px;
    opacity: 0.8;
}
.progress-total { font-size: 13px; margin-top: 4px; margin-bottom: 4px; }
.home-link-btn {
    margin-top: 8px;
    border: none;
    border-radius: 999px;
    padding: 7px 12px;
    background: #4a4ae6;
    color: #fff;
    font-size: 13px;
    cursor: pointer;
}
.home-link-btn:hover { opacity: .95; }

/* classe utilit치ria: esconder widget */
.ac-hidden { display:none; }
`;
document.head.appendChild(homeStyle);

// Progresso via localStorage
function lerProgressoModulo(chaveConcluido, chaveParcial) {
    if (localStorage.getItem(chaveConcluido) === 'true') return 100;
    const parcial = parseInt(localStorage.getItem(chaveParcial) || '0', 10);
    return Math.max(0, Math.min(100, parcial));
}

document.addEventListener('DOMContentLoaded', () => {
    // Perfil
    const nome  = localStorage.getItem('perfil_nome');
    const email = localStorage.getItem('perfil_email');
    const foto  = localStorage.getItem('perfil_foto');
    if (nome)  document.getElementById('aluno-nome').textContent  = nome;
    if (email) document.getElementById('aluno-email').textContent = email;
    if (foto)  document.getElementById('aluno-foto').src          = foto;

    // Progresso m칩dulos
    const m1 = lerProgressoModulo('pca_mod1_concluido', 'pca_mod1_progresso');
    const m2 = lerProgressoModulo('pca_mod2_concluido', 'pca_mod2_progresso');
    const m3 = lerProgressoModulo('pca_mod3_concluido', 'pca_mod3_progresso');

    const total = Math.round((m1 + m2 + m3) / 3);

    document.getElementById('prog-mod1').style.width = m1 + '%';
    document.getElementById('prog-mod1-text').textContent = m1 + '%';

    document.getElementById('prog-mod2').style.width = m2 + '%';
    document.getElementById('prog-mod2-text').textContent = m2 + '%';

    document.getElementById('prog-mod3').style.width = m3 + '%';
    document.getElementById('prog-mod3-text').textContent = m3 + '%';

    document.getElementById('prog-total').style.width = total + '%';
    document.getElementById('prog-total-text').textContent = total + '%';

    // M칩dulo em destaque
    let destaqueIndex = 1;
    let destaqueValor = m1;
    if (m2 < destaqueValor) { destaqueIndex = 2; destaqueValor = m2; }
    if (m3 < destaqueValor) { destaqueIndex = 3; destaqueValor = m3; }

    const nomes = {
        1: 'Fundamentos de Programa칞칚o',
        2: 'Constru칞칚o de Algoritmos',
        3: 'Estruturas de Dados B치sicas'
    };

    document.getElementById('mod-destaque-text').textContent = nomes[destaqueIndex];
    document.getElementById('prog-destaque').style.width = destaqueValor + '%';

    // Widget flutuante: toggle simples (refor칞o al칠m do script.js)
    const accessibilityBtn = document.getElementById('accessibility-btn');
    const accessibilityWidget = document.getElementById('accessibility-widget');
    if (accessibilityBtn && accessibilityWidget) {
        accessibilityBtn.addEventListener('click', () => {
            accessibilityWidget.classList.toggle('ac-hidden');
        });
    }
});
</script>
</body>
</html>
